<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="basic_project-3. 복습 로그인화면 구현" /><meta property="og:locale" content="ko" /><meta name="description" content="DB 연결하기" /><meta property="og:description" content="DB 연결하기" /><link rel="canonical" href="https://yunrap.github.io/posts/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%99%94%EB%A9%B4%EA%B5%AC%ED%98%84/" /><meta property="og:url" content="https://yunrap.github.io/posts/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%99%94%EB%A9%B4%EA%B5%AC%ED%98%84/" /><meta property="og:site_name" content="yunrap" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-07-16T20:33:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="basic_project-3. 복습 로그인화면 구현" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-07-18T14:29:07+09:00","datePublished":"2021-07-16T20:33:00+09:00","description":"DB 연결하기","headline":"basic_project-3. 복습 로그인화면 구현","mainEntityOfPage":{"@type":"WebPage","@id":"https://yunrap.github.io/posts/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%99%94%EB%A9%B4%EA%B5%AC%ED%98%84/"},"url":"https://yunrap.github.io/posts/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%99%94%EB%A9%B4%EA%B5%AC%ED%98%84/"}</script><title>basic_project-3. 복습 로그인화면 구현 | yunrap</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yunrap"><meta name="application-name" content="yunrap"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://yunrap.github.io/assets/img/favicons/스크린샷 2021-05-16 오후 12.19.55.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">yunrap</a></div><div class="site-subtitle font-italic">개발 일기</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>타임라인</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/yunrap" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dbsdpwl7','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>basic_project-3. 복습 로그인화면 구현</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>basic_project-3. 복습 로그인화면 구현</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> yunrap </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Jul 16, 2021, 8:33 PM +0900" prep="on" > Jul 16, 2021 <i class="unloaded">2021-07-16T20:33:00+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jul 18, 2021, 2:29 PM +0900" prefix="Updated " > Jul 18, 2021 <i class="unloaded">2021-07-18T14:29:07+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4231 words">23 min</span></div></div><div class="post-content"><h1 id="db-연결하기">DB 연결하기</h1><p>복습이므로 새로운프로젝트를 만들어 dbManager로 연결부터하려한다.</p><p>우선 계정을만든다음</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>create user yeji_user identified by 1234;
grant connect, resource, dba to yeji_user;
</pre></table></code></div></div><h2 id="dbmanager-구현">DBManager 구현</h2><p>com.yeji.web.db 패키지에 DBManager 을 구현해준다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
</pre><td class="rouge-code"><pre>/**
 * &lt;pre&gt;
 * 프로젝트명 : BasicBoard
 * 패키지명   : com.yeji.web.db
 * 파일명     : DBManager.java
 * 작성일     : 2021. 1. 5.
 * 작성자     : daekk
 * &lt;/pre&gt;
 */
package com.yeji.web.db;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

//import org.apache.logging.log4j.LogManager;
//import org.apache.logging.log4j.Logger;

/**
 * &lt;pre&gt;
 * 패키지명   : com.yeji.web.db
 * 파일명     : DBManager.java
 * 작성일     : 2021. 7. 16.
 * 작성자     : yeji
 * 설명       : DB 관리자
 * &lt;/pre&gt;
 */
public final class DBManager
{
	//private static Logger logger = LogManager.getLogger(DBManager.class);
	
	// JDBC 드라이버명
	private static final String driverClassName = "oracle.jdbc.OracleDriver";
	// JDBC URL
	private static final String jdbcUrl = "jdbc:oracle:thin:@localhost:1521:XE";
	// 계정
	private static final String userName = "yeji_user";
	// 비밀번호
	private static final String password = "1234";
	
	private DBManager() {}

	/**
	 * &lt;pre&gt;
	 * 메소드명   : getConnection
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : 데이터베이스 연결 객체를 얻는다.
	 * &lt;/pre&gt;
	 * @return java.sql.Connection
	 */
	public static Connection getConnection()
	{
		Connection conn = null;
				
		try
		{
			// 드라이버 로드
			Class.forName(driverClassName);
			
			// Database 연결 객체를 얻는다.
			conn = DriverManager.getConnection(jdbcUrl, userName, password);
		}
		catch (ClassNotFoundException e)
		{
			System.out.println("[DBManager] getConnection ClassNotFoundException");
		}
		catch (SQLException e)
		{
			System.out.println("[DBManager] getConnection SQLException");
		}				
		
		return conn;
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : close
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : ResultSet 객체를 닫는다.
	 * &lt;/pre&gt;
	 * @param rs java.sql.ResultSet
	 */
	public static void close(ResultSet rs)
	{
		close(rs, null, null);
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : close
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : PreparedStatement 객체를 닫는다.
	 * &lt;/pre&gt;
	 * @param pstmt java.sql.PreparedStatement
	 */
	public static void close(PreparedStatement pstmt)
	{
		close(null, pstmt, null);
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : close
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : Connection 객체를 닫는다.
	 * &lt;/pre&gt;
	 * @param conn java.sql.Connection
	 */
	public static void close(Connection conn)
	{
		close(null, null, conn);
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : close
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : ResultSet, PreparedStatement 객체를 닫는다.
	 * &lt;/pre&gt;
	 * @param rs    java.sql.ResultSet
	 * @param pstmt java.sql.PreparedStatement
	 */
	public static void close(ResultSet rs, PreparedStatement pstmt)
	{
		close(rs, pstmt, null);
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : close
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : PreparedStatement, Connection 객체를 닫는다.
	 * &lt;/pre&gt;
	 * @param pstmt java.sql.PreparedStatement
	 * @param conn  java.sql.Connection
	 */
	public static void close(PreparedStatement pstmt, Connection conn)
	{
		close(null, pstmt, conn);
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : close
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : 데이터베이스 객체를 닫는다.
	 * &lt;/pre&gt;
	 * @param rs    java.sql.ResultSet
	 * @param pstmt java.sql.PreparedStatement
	 * @param conn  java.sql.Connection
	 */
	public static void close(ResultSet rs, PreparedStatement pstmt, Connection conn)
	{
		if(rs != null)
		{
			try
			{
				rs.close();
			}
			catch (SQLException e)
			{
				System.out.println("[DBManager] close ResultSet SQLException");
			}
		}
		
		if(pstmt != null)
		{
			try
			{
				pstmt.close();
			}
			catch (SQLException e)
			{
				System.out.println("[DBManager] close PreparedStatement SQLException");
			}
		}
		
		if(conn != null)
		{
			try
			{
				conn.close();
			}
			catch (SQLException e)
			{
				System.out.println("[DBManager] close Connection SQLException");
			}
		}
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : setAutoCommit
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : commit 모드 변경
	 * &lt;/pre&gt;
	 * @param conn java.sql.Connection
	 * @param flag boolean
	 */
	public static void setAutoCommit(Connection conn, boolean flag)
	{
		if(conn != null)
		{
			try
			{
				if(conn.getAutoCommit() != flag)
				{
					conn.setAutoCommit(flag);
				}
			}
			catch (SQLException e)
			{
				System.out.println("[DBManager] setAutoCommit SQLException");
			}
		}
	}
	
	/**
	 * &lt;pre&gt;
	 * 메소드명   : rollback
	 * 작성일     : 2021. 7. 16.
	 * 작성자     : yeji
	 * 설명       : rollback
	 * &lt;/pre&gt;
	 * @param conn java.sql.Connection
	 */
	public static void rollback(Connection conn)
	{
		if(conn != null)
		{
			try
			{
				conn.rollback();
			}
			catch (SQLException e)
			{
				System.out.println("[DBManager] rollback SQLException");
			}
		}
	}
}

</pre></table></code></div></div><p>그후 ojdbc6.jar파일을 라이브러리에 임포트해준다</p><h2 id="디비연결-테스트-구현">디비연결 테스트 구현</h2><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre><td class="rouge-code"><pre><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="n">contentType</span><span class="o">=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="n">pageEncoding</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="o">%&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.sql.Connection</span><span class="s">" %&gt;
&lt;%@ page import="</span><span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">DriverManager</span><span class="s">" %&gt;

&lt;%
boolean connection = false;
Connection conn = null;

String driver = "</span><span class="n">oracle</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">driver</span><span class="o">.</span><span class="na">OracleDriver</span><span class="s">";
String url = "</span><span class="nl">jdbc:oracle:thin:</span><span class="nd">@localhost</span><span class="o">:</span><span class="mi">1521</span><span class="o">:</span><span class="n">xe</span><span class="s">";

try
{
	Class.forName(driver);
	conn = DriverManager.getConnection(url, "</span><span class="n">yeji_user</span><span class="s">", "</span><span class="mi">1234</span><span class="s">");

	if(conn == null)
	{
		connection = false;
		System.out.println("</span><span class="nc">DB연결</span> <span class="n">실패했습니다</span><span class="o">.</span><span class="s">");
	}
	else
	{
		connection = true;
		System.out.println("</span><span class="nc">DB연결</span> <span class="n">성공했습니다</span><span class="o">.</span><span class="s">");
	}

}
catch(Exception e)
{
	connection = false;
	System.out.println("</span><span class="nc">DB연결</span> <span class="n">실패</span><span class="o">.....</span><span class="s">");
	e.printStackTrace();  
}

%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="</span><span class="no">UTF</span><span class="o">-</span><span class="mi">8</span><span class="err">"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="no">JDBC</span> <span class="no">TEST</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
	<span class="k">if</span><span class="o">(</span><span class="n">connection</span> <span class="o">==</span> <span class="kc">true</span><span class="o">)</span>
	<span class="o">{</span>
<span class="o">%&gt;</span>
	<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">연결되었습니다</span><span class="o">.&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
	<span class="o">}</span>
	<span class="k">else</span>
	<span class="o">{</span>
<span class="o">%&gt;</span>	
	<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">연결실패입니다</span><span class="o">.&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
	<span class="o">}</span>
<span class="o">%&gt;</span>

<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><p>연결이 성공됬다고 뜨면 sql developer와 eclipse와의 서로 연결이 성공적으로 된것이다.</p><h1 id="로그인화면-구현">로그인화면 구현</h1><p>우선 처음이 로그인 부터 시작하기때문에 로그인화면을 구현한다.</p><h2 id="index-화면">index 화면</h2><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
</pre><td class="rouge-code"><pre><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="n">contentType</span><span class="o">=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="n">pageEncoding</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">include</span> <span class="n">file</span><span class="o">=</span><span class="s">"/include/head.jsp"</span> <span class="o">%&gt;</span>
<span class="o">&lt;</span><span class="n">style</span><span class="o">&gt;</span>
<span class="n">body</span> <span class="o">{</span>
  <span class="cm">/* padding-top: 40px; */</span>
  <span class="n">padding</span><span class="o">-</span><span class="nl">bottom:</span> <span class="mi">40</span><span class="n">px</span><span class="o">;</span>
  <span class="cm">/* background-color: #eee; */</span>
<span class="o">}</span>

<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="o">{</span>
  <span class="n">max</span><span class="o">-</span><span class="nl">width:</span> <span class="mi">330</span><span class="n">px</span><span class="o">;</span>
  <span class="nl">padding:</span> <span class="mi">15</span><span class="n">px</span><span class="o">;</span>
  <span class="nl">margin:</span> <span class="mi">0</span> <span class="n">auto</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span><span class="o">-</span><span class="n">heading</span><span class="o">,</span>
<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="o">.</span><span class="na">checkbox</span> <span class="o">{</span>
  <span class="n">margin</span><span class="o">-</span><span class="nl">bottom:</span> <span class="mi">10</span><span class="n">px</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="o">.</span><span class="na">checkbox</span> <span class="o">{</span>
  <span class="n">font</span><span class="o">-</span><span class="nl">weight:</span> <span class="mi">400</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">control</span> <span class="o">{</span>
  <span class="nl">position:</span> <span class="n">relative</span><span class="o">;</span>
  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="nl">sizing:</span> <span class="n">border</span><span class="o">-</span><span class="n">box</span><span class="o">;</span>
  <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="nl">sizing:</span> <span class="n">border</span><span class="o">-</span><span class="n">box</span><span class="o">;</span>
  <span class="n">box</span><span class="o">-</span><span class="nl">sizing:</span> <span class="n">border</span><span class="o">-</span><span class="n">box</span><span class="o">;</span>
  <span class="nl">height:</span> <span class="n">auto</span><span class="o">;</span>
  <span class="nl">padding:</span> <span class="mi">10</span><span class="n">px</span><span class="o">;</span>
  <span class="n">font</span><span class="o">-</span><span class="nl">size:</span> <span class="mi">16</span><span class="n">px</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="nl">control:</span><span class="n">focus</span> <span class="o">{</span>
  <span class="n">z</span><span class="o">-</span><span class="nl">index:</span> <span class="mi">2</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="n">input</span><span class="o">[</span><span class="n">type</span><span class="o">=</span><span class="s">"text"</span><span class="o">]</span> <span class="o">{</span>
  <span class="n">margin</span><span class="o">-</span><span class="nl">bottom:</span> <span class="mi">5</span><span class="n">px</span><span class="o">;</span>
  <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="o">-</span><span class="n">right</span><span class="o">-</span><span class="nl">radius:</span> <span class="mi">0</span><span class="o">;</span>
  <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="o">-</span><span class="n">left</span><span class="o">-</span><span class="nl">radius:</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">.</span><span class="na">form</span><span class="o">-</span><span class="n">signin</span> <span class="n">input</span><span class="o">[</span><span class="n">type</span><span class="o">=</span><span class="s">"password"</span><span class="o">]</span> <span class="o">{</span>
  <span class="n">margin</span><span class="o">-</span><span class="nl">bottom:</span> <span class="mi">10</span><span class="n">px</span><span class="o">;</span>
  <span class="n">border</span><span class="o">-</span><span class="n">top</span><span class="o">-</span><span class="n">left</span><span class="o">-</span><span class="nl">radius:</span> <span class="mi">0</span><span class="o">;</span>
  <span class="n">border</span><span class="o">-</span><span class="n">top</span><span class="o">-</span><span class="n">right</span><span class="o">-</span><span class="nl">radius:</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/javascript"</span><span class="o">&gt;</span>
<span class="err">$</span><span class="o">(</span><span class="n">document</span><span class="o">).</span><span class="na">ready</span><span class="o">(</span><span class="n">function</span><span class="o">(){</span>
   <span class="err">$</span><span class="o">(</span><span class="s">"#userId"</span><span class="o">).</span><span class="na">focus</span><span class="o">();</span>
   
   <span class="err">$</span><span class="o">(</span><span class="s">"#btnLogin"</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="s">"click"</span><span class="o">,</span> <span class="n">function</span><span class="o">(){</span>
      <span class="n">fn_loginCheck</span><span class="o">();</span>
   <span class="o">});</span>
   
   <span class="err">$</span><span class="o">(</span><span class="s">"#btnReg"</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="s">"click"</span><span class="o">,</span> <span class="n">function</span><span class="o">(){</span>
      <span class="n">location</span><span class="o">.</span><span class="na">href</span> <span class="o">=</span> <span class="s">"/user/userRegForm.jsp"</span><span class="o">;</span>
   <span class="o">});</span>
<span class="o">});</span>

<span class="n">function</span> <span class="nf">fn_loginCheck</span><span class="o">()</span>
<span class="o">{</span>
   <span class="k">if</span><span class="o">(</span><span class="err">$</span><span class="o">.</span><span class="na">trim</span><span class="o">(</span><span class="err">$</span><span class="o">(</span><span class="s">"#userId"</span><span class="o">).</span><span class="na">val</span><span class="o">()).</span><span class="na">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span>
   <span class="o">{</span>
      <span class="n">alert</span><span class="o">(</span><span class="s">"아이디를 입력하세요."</span><span class="o">);</span>
      <span class="err">$</span><span class="o">(</span><span class="s">"#userId"</span><span class="o">).</span><span class="na">focus</span><span class="o">();</span>
      <span class="k">return</span><span class="o">;</span>
   <span class="o">}</span>
   
   <span class="k">if</span><span class="o">(</span><span class="err">$</span><span class="o">.</span><span class="na">trim</span><span class="o">(</span><span class="err">$</span><span class="o">(</span><span class="s">"#userPwd"</span><span class="o">).</span><span class="na">val</span><span class="o">()).</span><span class="na">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span>
   <span class="o">{</span>
      <span class="n">alert</span><span class="o">(</span><span class="s">"비밀번호를 입력하세요."</span><span class="o">);</span>
      <span class="err">$</span><span class="o">(</span><span class="s">"#userPwd"</span><span class="o">).</span><span class="na">focus</span><span class="o">();</span>
      <span class="k">return</span><span class="o">;</span>
   <span class="o">}</span>
   
   <span class="err">$</span><span class="o">.</span><span class="na">ajax</span><span class="o">({</span>
    
   <span class="o">});</span>
<span class="o">}</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">include</span> <span class="n">file</span><span class="o">=</span><span class="s">"/include/navigation.jsp"</span> <span class="o">%&gt;</span>
<span class="o">&lt;</span><span class="n">div</span> <span class="kd">class</span><span class="err">="</span><span class="nc">container</span><span class="s">"&gt;

   &lt;form name="</span><span class="n">loginForm</span><span class="s">" id="</span><span class="n">loginForm</span><span class="s">" method="</span><span class="n">post</span><span class="s">" action="</span><span class="o">/</span><span class="n">loginProc</span><span class="o">.</span><span class="na">jsp</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">signin</span><span class="s">"&gt;
       &lt;h2 class="</span><span class="n">form</span><span class="o">-</span><span class="n">signin</span><span class="o">-</span><span class="n">heading</span> <span class="n">m</span><span class="o">-</span><span class="n">b3</span><span class="s">"&gt;로그인&lt;/h2&gt;
      &lt;label for="</span><span class="n">userId</span><span class="s">" class="</span><span class="n">sr</span><span class="o">-</span><span class="n">only</span><span class="s">"&gt;아이디&lt;/label&gt;
      &lt;input type="</span><span class="n">text</span><span class="s">" id="</span><span class="n">userId</span><span class="s">" name="</span><span class="n">userId</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">" maxlength="</span><span class="mi">20</span><span class="s">" placeholder="</span><span class="n">아이디</span><span class="s">"&gt;
      &lt;label for="</span><span class="n">userPwd</span><span class="s">" class="</span><span class="n">sr</span><span class="o">-</span><span class="n">only</span><span class="s">"&gt;비밀번호&lt;/label&gt;
      &lt;input type="</span><span class="n">password</span><span class="s">" id="</span><span class="n">userPwd</span><span class="s">" name="</span><span class="n">userPwd</span><span class="s">" class="</span><span class="n">form</span><span class="o">-</span><span class="n">control</span><span class="s">" maxlength="</span><span class="mi">20</span><span class="s">" placeholder="</span><span class="n">비밀번호</span><span class="s">"&gt;
        
      &lt;button type="</span><span class="n">button</span><span class="s">" id="</span><span class="n">btnLogin</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">lg</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">btn</span><span class="o">-</span><span class="n">block</span><span class="s">"&gt;로그인&lt;/button&gt;
       &lt;button type="</span><span class="n">button</span><span class="s">" id="</span><span class="n">btnReg</span><span class="s">" class="</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">lg</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span> <span class="n">btn</span><span class="o">-</span><span class="n">block</span><span class="s">" type="</span><span class="n">submit</span><span class="err">"</span><span class="o">&gt;</span><span class="n">회원가입</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></table></code></div></div><h2 id="model-user-구현">MODEL User 구현</h2><p>로그인에서 값을 받은 MODEL을 구현해준다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre><td class="rouge-code"><pre>package com.icia.model;

import java.io.Serializable;

public class User implements Serializable{
	
	private static final long serialVersionUID = 1L;
	
	private String userId; //사용자 아이디
	private String userPwd; //사용자 비밀번호
	private String userName; //사용자 명
	private String userEmail; //사용자 이메일
	private String status; //상태("Y"사용, "N"정지)
	private String regDate; //등록일
	
	
	public User()
	{
		userId = "";
		userPwd = "";
		userName = "";
		userEmail = "";
		status = "";
		regDate = "";
	}
	
	public String getUserId() {
		return userId;
	}
	public void setUserId(String userId) {
		this.userId = userId;
	}
	public String getUserPwd() {
		return userPwd;
	}
	public void setUserPwd(String userPwd) {
		this.userPwd = userPwd;
	}
	public String getUserName() {
		return userName;
	}
	public void setUserName(String userName) {
		this.userName = userName;
	}
	public String getUserEmail() {
		return userEmail;
	}
	public void setUserEmail(String userEmail) {
		this.userEmail = userEmail;
	}
	public String getStatus() {
		return status;
	}
	public void setStatus(String status) {
		this.status = status;
	}
	public String getRegDate() {
		return regDate;
	}
	public void setRegDate(String regDate) {
		this.regDate = regDate;
	}
	
}

</pre></table></code></div></div><h2 id="loginprocajax-구현">loginProcAjax 구현</h2><ol><li>index부분에서 loginProcAjax 구현하기</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre> $.ajax({
	   type: "POST",
	   url: "/loginProcAjax.jsp",
	   data: {
		   userId: $("#userId").val(),
		   userPwd: $("#userPwd").val()
	   },
	   datatype: "JSON",
	   success: function(obj){
		   
	   }
    	
   });
</pre></table></code></div></div><ol><li>loginProcAjax ``` &lt;%@ page language=”java” contentType=”text/html; charset=UTF-8” pageEncoding=”UTF-8”%&gt; &lt;%@ page import=”com.yeji.common.util.StringUtil” %&gt; &lt;%@ page import=”com.yeji.web.util.HttpUtil” %&gt; &lt;%@page import=”com.yeji.model.User”%&gt; &lt;%@ page import=”com.yeji.web.dao.UserDao” %&gt;</ol><p>&lt;% System.out.println(“loginProcAjax.jsp start…….”);</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>String userId = HttpUtil.get(request, "userId");
String userPwd = HttpUtil.get(request, "userPwd");

System.out.println(userId);
System.out.println(userPwd); %&gt; ```
</pre></table></code></div></div><p>여기서는 web.xml에 구현되있는 filter의 HttpEncodingFilter , UrlUserAuthFilter 클래스를 임포트해준다. 이부분은 생략하고 나중에 자세히보겠다.</p><p>servlet매핑을 통해가져온 HttpUtil클래스의 get메소드를통해 아이디와 패스워드를 가져온다.</p><p>이클립스 콘솔창에 값이 넘어오는지확인한다.</p><p>여기서보자면 HttpUtil은 servlet에 대해 구현이되어있는데 이에 대한 개념이 필요하다 HttpServletRequest를 사용하면, 값을 받아올 수가 있는데 만약 회원 정보를 컨트롤러로 보냈을 때 HttpServletRequest 객체 안에 모든 데이터들이 들어가게 됩니다 즉 화면에서 값을 입력해줬을대 데이터들이 들어가있는 보관소라고 보면된다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;%@ page import="com.yeji.common.util.StringUtil" %&gt;
&lt;%@ page import="com.yeji.common.util.HttpUtil" %&gt;
&lt;%@ page import="com.yeji.web.dao.UserDao" %&gt;
&lt;%
	System.out.println("loginProcAjax.jsp START..............");

	String userId = HttpUtil.get(request, "userId");	//HttpServletRequest 가져온 userId
	String userPwd = HttpUtil.get(request, "userPwd");	//HttpServletRequest 가져온 userPwd

	if(!StringUtil.isEmpty(userId) &amp;&amp; !StringUtil.isEmpty(userPwd))	//아이디, 패스워드 값이 비워있지않으면 
	{
		UserDao userDao = new UserDao();
		userDao.userSelect(userId);
	}
%&gt;
</pre></table></code></div></div><p>StringUtil은 문자열 공백수정, 문자열특수문자 가공등이 들어가있는 메소드이다. 이렇게 값을 가져온다음 아이디가 비밀번호 둘다 공백이아닐경우에 유저객체를 만들어 SELECT 시켜주는것이다.</p><h2 id="tbl-user-db구현">TBL USER DB구현</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>CREATE TABLE TBL_USER
(
    USER_ID VARCHAR2(20) NOT NULL,
    USER_PWD VARCHAR(20) NULL,
    USER_NAME VARCHAR2(30) NULL,  
    USER_EMAIL VARCHAR2(50) NULL,
    STATUS CHAR(1) NULL,
    REG_DATE DATE NULL
);

COMMENT ON COLUMN TBL_USER.USER_ID IS '사용자 아이디';
COMMENT ON COLUMN TBL_USER.USER_PWD IS '비밀번호';
COMMENT ON COLUMN TBL_USER.USER_NAME IS '사용자 명';
COMMENT ON COLUMN TBL_USER.USER_EMAIL IS '사용자 이메일';
COMMENT ON COLUMN TBL_USER.STATUS IS '사용여부(Y:사용, N:정지)';
COMMENT ON COLUMN TBL_USER.REG_DATE IS '등록일';

CREATE UNIQUE INDEX PK_USER ON TBL_USER(USER_ID ASC); 
ALTER TABLE TBL_USER ADD CONSTRAINT PK_USER PRIMARY KEY(USER_ID);
</pre></table></code></div></div><p>USER 에대한 정보가담긴 테이블을 만들었다. 맨마지막 두줄을 유의깁게보면</p><p>PK USER를 유니큐인덱스로 만들었고 단 USER ID순으로 PK USER 와 USER ID 를 PK로 만들어준다.</p><p>이그림을 참고하면되지만 왜이렇게해줬는지 확실히모르겠다.</p><p>무튼 이렇게 테이블을 설정하고!</p><h2 id="user-dao구현">USER DAO구현</h2><p>유저의 아이디를 검색하기위한 USER SELECT 부분을 구현한다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
</pre><td class="rouge-code"><pre>package com.yeji.web.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import com.yeji.common.util.StringUtil;
import com.yeji.model.User;
import com.yeji.web.db.DBManager;

public class UserDao {

	public UserDao()
	{
		
	}
	
	public User userSelect(String userId)
	{
		User user = null; //user가 없을때 null설정
		StringBuilder sql = new StringBuilder();
		PreparedStatement pstmt = null;
		ResultSet rs = null;
		Connection conn = null;
		
		sql.append("SELECT ");
		sql.append("	USER_ID, ");
		sql.append("    NVL(USER_PWD, '') AS USER_PWD, ");
		sql.append("    NVL(USER_NAME, '') AS USER_NAME, ");
		sql.append("	NVL(USER_EMAIL, '') AS USER_EMAIL, ");
		sql.append("	NVL(STATUS, '') AS STATUS, ");
		sql.append("    NVL(TO_CHAR(REG_DATE, 'YYYY.MM.DD HH24:MI:SS'), '') AS REG_DATE ");
		sql.append(" FROM ");
		sql.append("	TBL_USER ");
		sql.append("WHERE   USER_ID = ? ");
		
		
		try
		{
			conn = DBManager.getConnection();
			pstmt=conn.prepareStatement(sql.toString());
			
			pstmt.setString(1, userId);
			
			rs = pstmt.executeQuery();
			
			if(rs.next())
			{
				user = new User();
				user.setUserId(StringUtil.nvl(rs.getString("USER_ID")));
				user.setUserPwd(StringUtil.nvl(rs.getString("USER_PWD")));
				user.setUserName(StringUtil.nvl(rs.getString("USER_NAME")));
				user.setUserEmail(StringUtil.nvl(rs.getString("USER_EMAIL")));
				user.setStatus(StringUtil.nvl(rs.getString("STATUS")));
				user.setRegDate(StringUtil.nvl(rs.getString("REG_DATE")));
			}
		}
		catch(Exception e)
		{
			System.out.println("[UserDao] userSelect SQLException");
		}
		finally
		{
			DBManager.close(rs, pstmt, conn);
		}
		return user;
	}
	
}

</pre></table></code></div></div><p>이렇게까지 다구현을 했으면 실제로 아이디 입력과 비밀번호 입력이 잘 넘어가는지 index에서 jquery로 가공을 잘해줘야한다.</p><h1 id="index-jquery-가공">index jquery 가공</h1><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>$.ajax({
	   type: "POST",
	   url: "/loginProcAjax.jsp",
	   data: {
		   userId: $("#userId").val(),
		   userPwd: $("#userPwd").val()
	   },
	   datatype: "JSON",
	   success: function(obj){
		   	if(!yeji.common.isEmpty(obj))
			{
				
			}
	   },
	   complete: function(data)
	   {
		   
	   }
	 
   });
</pre></table></code></div></div><p>처음에는 data부분이 어떤방식으로 넘어가는지몰라서 loginProcAjax 이부분에서 어떻게 값이 넘어가는지 제대로 이해하지못한 상태여서 오랜시간을 해맸다.</p><p>이부분을 더알아보자</p><h2 id="ajax의-비동기방법-servlet의-이해">ajax의 비동기방법 servlet의 이해</h2><p>data로 값들이 넘겨가면 이값은 ajax의 비동기방법으로 서버에 전송이가능하다 이때 연결되는 첫번째 컴포넌트가 바로 servlet이 되는것이다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>loginProcAjax 부분
String userId = HttpUtil.get(request, "userId");
	String userPwd = HttpUtil.get(request, "userPwd");
	String cookieUserId = CookieUtil.getValue(request, "USER_ID");


HttpUtil get 메소드  
public static String get(HttpServletRequest request, String name)
{
  if(name == null)
  {
    return "";
  }

  return StringUtil.nvl(request.getParameter(name)).trim();
}  
</pre></table></code></div></div><p>이렇게 서블랫에서 request를 요청해서 ajax로 넘겼던 값들을 가져온다.</p><h2 id="httpservletrequest">HttpServletRequest</h2><p>즉 사용자가 서버쪽으로 데이터를 요청할때 사용한다.</p><p>사용되는메소드는 크게 3개만 알고있자</p><ol><li>request.getParameter<li>request.getAtrribute<li>request.setAttribute</ol><h2 id="httpservletrequest-1">HttpServletRequest</h2><p>서버에서 만든 데이터를 사용자에게 넘겨줄때 사용하는 객체가 response가된다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>if(StringUtil.equals(user.getUserPwd(), userPwd))
				{
					//쿠키생성
					CookieUtil.addCookie(response, "USER_ID", userId);
					response.getWriter().write("{\"flag\"=0}");
				}
				else
				{
					System.out.println("아이디[" +userId + "]의 비밀번호[" +userPwd + "]가 일치 하지 않는다.");
					response.getWriter().write("{\"flag\":-1}");
				}	
</pre></table></code></div></div><h1 id="index-jquery-가공-1">index jquery 가공</h1><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre>    $.ajax({
	   type: "POST",
	   url: "/loginProcAjax.jsp",
	   data: {
		   userId: $("#userId").val(),
		   userPwd: $("#userPwd").val()
	   },
	   datatype: "JSON",
	   success: function(obj){
		   console.log(obj);
       var data= JSON.parse(obj);
			 console.log(data);
	   },
	   complete: function(data)
	   {
		   
	   }
	 
   });
   
   
   
   값 {"flag"=0}
   
   값
   	{flag: 0}
    object
</pre></table></code></div></div><p>data의 console 을찍어주면 이렇게 문자열로 인식된 값이 나온다.</p><p>그후 JSON parse로 화면에서 오브젝트로 변경해준다.</p><h2 id="json-parse-란">json parse 란</h2><div class="language-html highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;h2&gt;</span>Creating an Object from a JSON String<span class="nt">&lt;/h2&gt;</span>

<span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">"demo"</span><span class="nt">&gt;&lt;/p&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="kd">const</span> <span class="nx">txt</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">{"name":"John", "age":30, "city":"New York"}</span><span class="dl">'</span>
<span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">txt</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">demo</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">, </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">age</span><span class="p">;</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p>JSON parse 예시이다.</p><p>원래의 스트링열에서 이렇게 오브잭트로 변경한후 오브젝트에 변수를 점으로 표현하면 그에대한 값을 접근할수있게만들어준다.</p><p>그후 flag값을</p><ol><li>비밀번호가올바르지 않습니다.<li>사용이 정지된아이디가입니다.<li>아이디와 일치하는 사용자 정보가 없습니다.<li>파라미터 값이 올바르지 않습니다.<li>그외에는 오류가발생했습니다.</ol><p>이런오류값을 설정해주려면 flag값을 가공해줄수있는 스크립트가 필요하다</p><h2 id="오브젝트-값-처리-함수">오브젝트 값 처리 함수</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre>yeji.common.objectValue = function(obj, field, defVal)
	{
		if(yeji.common.isEmpty(obj) == false)
		{
			if(yeji.common.type(obj) === "object")
			{
				if(!yeji.common.isEmpty(obj[field]))
				{
					return obj[field];  
				}
				else
				{
					if(!yeji.common.isUndefined(defVal))
					{
						return defVal;
					}
					else
					{
						return null;
					}	
				}
			}
			else
			{
				if(yeji.common.isUndefined(defVal) == false)
				{	
					return defVal;
				}
				else
				{
					return null;
				}
			}
		}
		else
		{
			if(yeji.common.isUndefined(defVal) == false)
			{	
				return defVal;
			}
			else
			{
				return null;
			}
		}
	}
</pre></table></code></div></div><p>오브젝트에 접근해서 값이 비워있지않고 오브젝트일경우</p><p>data오브젝트의 플래그 변수명에접근해서 숫자 0 이나올것이다</p><p>단 로그인이 성공일 경우엔</p><h2 id="index-최종">index 최종</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre>success: function(obj){
  if(!yeji.common.isEmpty(obj))
  {

    var data= JSON.parse(obj);
    var flag = yeji.common.objectValue(data, "flag", -500);

    if(flag == 0)
    {
      alert("로그인 성공");
    }
    else
    {
      if(flag == -1)
      {
        alert("비밀번호가 올바르지 않습니다.");
        $("#userPwd").focus();
      }
      else if(flag == -2)
      {
        alert("사용이 정지된 아이디 입니다.");
        $("#userId").focus();
      }
      else if(flag == -3)
      {
        alert("아이디와 일치하는 사용자 정보가 없습니다.");
        $("#userId").focus();
      }
      else if(flag == -100)
      {
        alert("파라미터 값이 올바르지 않습니다.");
        $("#userId").focus();
      }
      else
      {
        alert("오류가 발생했습니다.");
        $("#userId").focus();
      }
    }
  }
 },
 complete: function(data)
 {
   yeji.common.log(data);
 },
 error: function(xhr, status, error){
    yeji.common.log(error);
  alert("로그인 에러입니다");
 }
</pre></table></code></div></div><p>이렇게하면 최종적인 로그인 구현은 완료됬다. 마지막으로 해야할일은 로그인한후 네비게이션부분 수정이다.</p><p>이부분은 오류가있어서 수정후 다시올리겠다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/project/'>Project</a>, <a href='/categories/basic-project/'>basic_project</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/basic-project/" class="post-tag no-text-decoration" >basic_project</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=basic_project-3. 복습 로그인화면 구현 - yunrap&url=https://yunrap.github.io/posts/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%99%94%EB%A9%B4%EA%B5%AC%ED%98%84/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=basic_project-3. 복습 로그인화면 구현 - yunrap&u=https://yunrap.github.io/posts/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%99%94%EB%A9%B4%EA%B5%AC%ED%98%84/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=basic_project-3. 복습 로그인화면 구현 - yunrap&url=https://yunrap.github.io/posts/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%99%94%EB%A9%B4%EA%B5%AC%ED%98%84/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>최근 업데이트</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B0%B0%EC%B9%98-Chunk-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%9D%B4%ED%95%B4/">스프링배치 Chunk 프로세스 이해</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%803/">바닐라 JS 챌린지 3</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%804/">바닐라 JS 챌린지 4</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%805/">바닐라 JS 챌린지 5</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%806/">바닐라 JS 챌린지 6</a></ul></div><div id="access-tags"> <span>인기 태그</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/%EB%B0%94%EB%8B%90%EB%9D%BCjs/">바닐라JS</a> <a class="post-tag" href="/tags/spring-project/">spring_project</a> <a class="post-tag" href="/tags/basic-project/">basic_project</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/spring/">SPRING</a> <a class="post-tag" href="/tags/jquery/">jQuery</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/diagram/">diagram</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">목차</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>이 블로그 다른 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EA%B2%8C%EC%8B%9C%EB%AC%BC%EC%9E%91%EC%84%B1/"><div class="card-body"> <span class="timeago small" > Jul 14, 2021 <i class="unloaded">2021-07-14T20:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>basic_project-2. 게시물작성 구현</h3><div class="text-muted small"><p> 1. BoardDao 파일 총 게시물 수 가져오기 게시판 리스트 게시물 등록 게시물 수정 게시물 삭제 선택된 게시물에대한 조회 게시물 조회시 조회카운트 증가 게시물 번호 조회 총 8가지가 구현되어있는 sql.append를 사용하여 쿼리를 날려 db에 전달하는 dao파일이다. 우선 최근에했던 게시물 등록에대한 메소드...</p></div></div></a></div><div class="card"> <a href="/posts/%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-%EC%88%98%EC%A0%95%ED%99%94%EB%A9%B4-%EA%B5%AC%ED%98%84/"><div class="card-body"> <span class="timeago small" > Jul 18, 2021 <i class="unloaded">2021-07-18T20:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>basic_project-4. 복습 회원가입화면 수정 화면 구현</h3><div class="text-muted small"><p> 회원가입 화면 구현 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65...</p></div></div></a></div><div class="card"> <a href="/posts/%EA%B2%8C%EC%8B%9C%ED%8C%90%EB%A6%AC%EC%8A%A4%ED%8A%B8%EA%B5%AC%ED%98%84/"><div class="card-body"> <span class="timeago small" > Jul 19, 2021 <i class="unloaded">2021-07-19T20:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>basic_project-5. 게시판리스트구현</h3><div class="text-muted small"><p> 글작성 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EA%B2%8C%EC%8B%9C%EB%AC%BC%EC%9E%91%EC%84%B1/" class="btn btn-outline-primary" prompt="이전"><p>basic_project-2. 게시물작성 구현</p></a> <a href="/posts/%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-%EC%88%98%EC%A0%95%ED%99%94%EB%A9%B4-%EA%B5%AC%ED%98%84/" class="btn btn-outline-primary" prompt="다음"><p>basic_project-4. 복습 회원가입화면 수정 화면 구현</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">yunrap</a>. <span data-toggle="tooltip" data-placement="top" title="다르게 명시되지 않는 한, 크리에이티브 커먼즈 저작자표시-비영리 4.0 (CC BY-NC 4.0) 국제 라이선스에 따라 저자는 저작물에 대한 라이선스를 가지며, 라이선스에 따라 이용할 수 있습니다.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">인기 태그</h4><a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/%EB%B0%94%EB%8B%90%EB%9D%BCjs/">바닐라JS</a> <a class="post-tag" href="/tags/spring-project/">spring_project</a> <a class="post-tag" href="/tags/basic-project/">basic_project</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/spring/">SPRING</a> <a class="post-tag" href="/tags/jquery/">jQuery</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/diagram/">diagram</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://yunrap.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
