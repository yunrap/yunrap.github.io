<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="스프링배치 시작" /><meta property="og:locale" content="ko" /><meta name="description" content="1. @EnableBatchProcessing" /><meta property="og:description" content="1. @EnableBatchProcessing" /><link rel="canonical" href="https://yunrap.github.io/posts/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B0%B0%EC%B9%98-%EC%8B%9C%EC%9E%91/" /><meta property="og:url" content="https://yunrap.github.io/posts/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B0%B0%EC%B9%98-%EC%8B%9C%EC%9E%91/" /><meta property="og:site_name" content="yunrap" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-23T21:33:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="스프링배치 시작" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-23T21:33:00+09:00","datePublished":"2022-01-23T21:33:00+09:00","description":"1. @EnableBatchProcessing","headline":"스프링배치 시작","mainEntityOfPage":{"@type":"WebPage","@id":"https://yunrap.github.io/posts/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B0%B0%EC%B9%98-%EC%8B%9C%EC%9E%91/"},"url":"https://yunrap.github.io/posts/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B0%B0%EC%B9%98-%EC%8B%9C%EC%9E%91/"}</script><title>스프링배치 시작 | yunrap</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yunrap"><meta name="application-name" content="yunrap"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://yunrap.github.io/assets/img/favicons/스크린샷 2021-05-16 오후 12.19.55.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">yunrap</a></div><div class="site-subtitle font-italic">개발 일기</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>타임라인</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/yunrap" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dbsdpwl7','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>스프링배치 시작</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>스프링배치 시작</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> yunrap </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Jan 23, 2022, 9:33 PM +0900" prep="on" > Jan 23 <i class="unloaded">2022-01-23T21:33:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1552 words">8 min</span></div></div><div class="post-content"><h1 id="1-enablebatchprocessing">1. @EnableBatchProcessing</h1><p>스프링 배치가 작동하기 위해 선언해야 하는 어노테이션</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>@EnableBatchProcessing
@SpringBootApplication
public class StudySpringBatchApplication {

    public static void main(String[] args) {
        SpringApplication.run(StudySpringBatchApplication.class, args);
    }

}
</pre></table></code></div></div><p>모든 빈들의 모든 Job을 검색해서 초기화와 동시에 Job을 수행하도록 구성됨</p><h1 id="2-스프링-배치-초기화-설정--클래스4개">2. 스프링 배치 초기화 설정 클래스(4개)</h1><p>우선은 이런것이있구나하고 넘어간다</p><h2 id="1-bacthautoconfiguration">1. BacthAutoConfiguration</h2><p>스프링 배치가 초기화 될 때 자동으로 실행되는 설정 클래스</p><p>Job 을 수행하는 JobLauncherApplicationRunner 빈을 생성</p><h2 id="2simplebatchconfiguration">2.SimpleBatchConfiguration</h2><p>JobBuilderFactory 와 StepBuilderFactory 생성</p><p>스프링 배치의 주요 구성 요소 생성 - 프록시 객체로 생성됨</p><ul><li>프록시객체 : 호출한 객체를 받아 내부적으로 실행하는객체</ul><h2 id="3-batchconfigureconfiguration">3. BatchConfigureConfiguration</h2><h3 id="1basicbatchconfigure">1.BasicBatchConfigure</h3><p>simplebatchConfiguration에서 생성한 프록시 객체의 실제 대상 객체를 생성하는 설정 클래스</p><p>빈으로 의존성 주입받아서 주요 객체들을 참조해서 사용할수있다.</p><h3 id="2jpabatchconfigurer">2.JpaBatchConfigurer</h3><p>JPA관련 객체를 생성하는 설정 클래스</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/93ff306c-e3e8-4947-bc3b-cf8828538f56/Untitled.png" alt="Untitled" /></p><p>실제적인 흐름도이다.</p><h1 id="3-spring-batch-실행하기">3. Spring Batch 실행하기</h1><h2 id="job-구동--step실행---tasklet실행">JOB 구동 &gt; Step실행 &gt; Tasklet실행</h2><p>크게 3가지 구조로나뉜다.</p><p>@Configuration 선언</p><p>하나의 배치 Job을 정의하고 빈설정</p><p>JobBuilderFactory</p><p>Job을 생성하는 빌더 팩토리</p><p>StepBuilderFactory</p><p>step을 생성하는 빌더 팩토리</p><p>Job</p><p>helloJob 이름으로 job생성</p><p>step</p><p>helloStep 이름으로 step 생성</p><p>testket</p><p>step 안에서 단일 태스크로 수행되는 로직 구현</p><p>크게보면 : Job 구동 → step 실행 → Tasklet을 실행</p><h2 id="그림으로-이해하기">그림으로 이해하기</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/49985287-a1ef-432c-a2bb-e903f42bb7bd/Untitled.png" alt="Untitled" /></p><p>jobBuilderFactory를 선언하면 job이 생성된다.</p><p>job안에 포함되있는 step이 실행되고, step은 tasklet을 실행한다.</p><h1 id="4-소스로-이해하기">4. 소스로 이해하기</h1><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre><td class="rouge-code"><pre>package com.example.study_spring_batch;

import lombok.RequiredArgsConstructor;
import org.springframework.batch.core.Job;
import org.springframework.batch.core.Step;
import org.springframework.batch.core.StepContribution;
import org.springframework.batch.core.configuration.annotation.JobBuilderFactory;
import org.springframework.batch.core.configuration.annotation.StepBuilderFactory;
import org.springframework.batch.core.scope.context.ChunkContext;
import org.springframework.batch.core.step.tasklet.Tasklet;
import org.springframework.batch.repeat.RepeatStatus;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@RequiredArgsConstructor
@Configuration
public class HelloJobConfiguration {

    private final JobBuilderFactory jobBuilderFactory;
    private final StepBuilderFactory stepBuilderFactory;

    @Bean
    public Job helloJob(){
        return jobBuilderFactory.get("helloJob")
                .start(helloStep1())
                .next(helloStep2())
                .build();
    }

    @Bean
    public Step helloStep1(){
        return stepBuilderFactory.get("helloStep1")
                .tasklet(new Tasklet() {
                    @Override
                    public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {

                        System.out.println("====================");
                        System.out.println(" &gt;&gt; HELLO SPRING BATCH!! ");
                        System.out.println("====================");
                        return RepeatStatus.FINISHED;
                    }
                })
                .build();
    }

    @Bean
    public Step helloStep2(){
        return stepBuilderFactory.get("helloStep2")
                .tasklet(new Tasklet() {
                    @Override
                    public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {

                        System.out.println("====================");
                        System.out.println(" &gt;&gt; STEP2 WAS EXECUTED ");
                        System.out.println("====================");
                        return RepeatStatus.FINISHED;
                    }
                })
                .build();
    }
}
</pre></table></code></div></div><p>ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ</p><h1 id="5-db스키마-생성">5. DB스키마 생성</h1><h2 id="1-스프링-배치-메타-데이터">1. 스프링 배치 메타 데이터</h2><p>스프링 배치의 실행 및 관리를 위한 목적으로 여러 job, step, jobparameter의 정보들을 저장 업테이트</p><p>조회할수있는 스키마를 제공한다</p><ul><li>과거, 현재실행에대한 세세한정보, 실행에대한 성공과 실패여부등을 관리함 으로서 배치운용에있어 리스크 발행시 빠른 대처가능하다.<li>DB연동할 경우 필수적으로 메타 테이블이 생성 되어야한다.</ul><h2 id="2-스키마-생성-설정">2. 스키마 생성 설정</h2><p>수동생성 - 쿼리 복사후 직접 실행</p><p>자동생성 -</p><ul><li>ALWAYS<ul><li>스크립트 항상 실행<li>RDBMS 설정이되어있을경우 내장 db보다 우선적으로 실행</ul><li>EMBEDDED<ul><li>내장 DB일 때만 실행되며 스키마가 자동 생성됨, 기본값</ul><li>NEVER<ul><li>스크립트 항상 실행 안함<li>내장 DB일경우 스크립트가 생성이 안되기 때문에 오류 발생</ul></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/38d3ed62-cbe6-4bb2-bbe7-2e09bfcafea8/Untitled.png" alt="Untitled" /></p><h2 id="3-직접테스트해보기">3. 직접테스트해보기</h2><h2 id="1-mysql-디비접속시-alway-스키마생성">1. mysql 디비접속시 alway 스키마생성</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre>spring:
  profiles:
    active: local    여기부분이 local로 실행되어도 실행할때 active profile을 mysql로 설정도가능

---
spring:
  config:
    activate:
      on-profile: local
  datasource:
    hikari:
      jdbc-url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
      username: sa
      password:
      driver-class-name: org.h2.Driver

---
spring:
  config:
    activate:
      on-profile: mysql
  datasource:
    hikari:
      jdbc-url: jdbc:mysql://localhost:3306/springbatch?useUnicode=true&amp;characterEncoding=utf8
      username: root
      password: 1234
      driver-class-name: com.mysql.jdbc.Driver
  batch:
    jdbc:
      initialize-schema: always
</pre></table></code></div></div><p>application.yml 파일에서</p><p>h2 데이터베이스와 mysql 데이터베이스를 연결한뒤</p><p>아래부분 initialize-schema를 ALWAY로 실행하면 내장DB 보다 mysql 이 실행되고 ,</p><p>해당스크립트를 항상 실행한다고보면된다.</p><h2 id="2-local-h2-db-접속시-local-스키마생성">2. local (h2 db) 접속시 local 스키마생성</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre>
spring:
  profiles:
    active: local

---
spring:
  config:
    activate:
      on-profile: local
  datasource:
    hikari:
      jdbc-url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
      username: sa
      password:
      driver-class-name: org.h2.Driver
    batch:
      jdbc:
        initialize-schema: embedded

---
spring:
  config:
    activate:
      on-profile: mysql
  datasource:
    hikari:
      jdbc-url: jdbc:mysql://localhost:3306/springbatch?useUnicode=true&amp;characterEncoding=utf8
      username: root
      password: 1234
      driver-class-name: com.mysql.jdbc.Driver
</pre></table></code></div></div><h2 id="4-job관련-테이블">4. jOB관련 테이블</h2><h3 id="1-batch_job_instance">1. BATCH_JOB_INSTANCE</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/29ad94ab-1f9c-48cf-bdc0-b58e03755e69/Untitled.png" alt="Untitled" /></p><p>JOB이 실행될때 jobInstance 정보가 저장되며 job_name과 job_key를 키로하여 하나의 데이터가 저장</p><p>동일한 job_name과 job_key로 중복 저장 될 수 없다. (고유키가생각)</p><p>실행결과</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/894bd08c-cdad-497d-9093-b02c323a0c2c/Screen_Shot_2022-01-23_at_11.19.28_PM.png" alt="Screen Shot 2022-01-23 at 11.19.28 PM.png" /></p><h3 id="2-batch_job_execution">2. <strong>BATCH_JOB_EXECUTION</strong></h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/05fccd0d-2fc9-4fe0-a8bc-20ecdcd0137b/Untitled.png" alt="Untitled" /></p><p>job 의 실행정보가 저장되며 Job 생성, 시작, 종료 시간, 실행상태, 메시지 등을 관리</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8251b948-c06e-4e69-ac89-9a674d51f7f2/Screen_Shot_2022-01-23_at_11.22.45_PM.png" alt="Screen Shot 2022-01-23 at 11.22.45 PM.png" /></p><h3 id="3-batch_job_execution_params">3. BATCH_JOB_EXECUTION_PARAMS</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/50e16693-90d3-477e-961c-4c0ec8e1c227/Untitled.png" alt="Untitled" /></p><p>Job과 함께 실행되는 JobParameter 정보를 저장</p><h3 id="4-batch_job_execution_context">4. BATCH_JOB_EXECUTION_CONTEXT</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9000053f-f246-47a2-8e64-82f557afd500/Untitled.png" alt="Untitled" /></p><p>Job 의 실행동안 여러가지 상태정보, 공유 데이터를 직렬화 (Json 형식) 해서 저장 Step 간 서로 공유 가능함</p><h2 id="5-step관련-테이블">5. STEP관련 테이블</h2><h3 id="1-batch_step_execution">1. BATCH_STEP_EXECUTION</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b15f8a07-ac51-42b4-99b1-1dbf64dc5b6d/Untitled.png" alt="Untitled" /></p><h3 id="2batch_step_context">2.BATCH_STEP_CONTEXT</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5ca647af-33c8-479f-a54b-dee63ba5aaa9/Untitled.png" alt="Untitled" /></p><h1 id="2step-관련-테이블">2.Step 관련 테이블</h1><h1 id="파라미터로-job-실행-지정">파라미터로 Job 실행 지정</h1><p>Spring Batch는 자체적으로 스케줄 처리를 하는 기능이 없습니다</p><p>그래서 외부에서 Crontab / Jenkins 등을 사용해서 Job을 실행하게 됩니다</p><p>이때 program argument를 통해 job name을 전달해서 원하는 job을 실행 하실 수 있습니다</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/backend/'>BACKEND</a>, <a href='/categories/spring-batch/'>SPRING BATCH</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/spring/" class="post-tag no-text-decoration" >SPRING</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=스프링배치 시작 - yunrap&url=https://yunrap.github.io/posts/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B0%B0%EC%B9%98-%EC%8B%9C%EC%9E%91/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=스프링배치 시작 - yunrap&u=https://yunrap.github.io/posts/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B0%B0%EC%B9%98-%EC%8B%9C%EC%9E%91/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=스프링배치 시작 - yunrap&url=https://yunrap.github.io/posts/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B0%B0%EC%B9%98-%EC%8B%9C%EC%9E%91/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>최근 업데이트</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B0%B0%EC%B9%98-Chunk-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%9D%B4%ED%95%B4/">스프링배치 Chunk 프로세스 이해</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%803/">바닐라 JS 챌린지 3</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%804/">바닐라 JS 챌린지 4</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%805/">바닐라 JS 챌린지 5</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%806/">바닐라 JS 챌린지 6</a></ul></div><div id="access-tags"> <span>인기 태그</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/%EB%B0%94%EB%8B%90%EB%9D%BCjs/">바닐라JS</a> <a class="post-tag" href="/tags/spring-project/">spring_project</a> <a class="post-tag" href="/tags/basic-project/">basic_project</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/spring/">SPRING</a> <a class="post-tag" href="/tags/jquery/">jQuery</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/diagram/">diagram</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">목차</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>이 블로그 다른 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B0%B0%EC%B9%98-Chunk-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%9D%B4%ED%95%B4/"><div class="card-body"> <span class="timeago small" > Jan 29 <i class="unloaded">2022-01-29T21:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>스프링배치 Chunk 프로세스 이해</h3><div class="text-muted small"><p> 1. chunk 기본개념t Cunck란 여러개의 아이템을 묶은 하나의 덩어리를 의미한다.수정 한번에 하나씩 아이템을 입력받아 Chunk 단위의 덩어리로만들어 Cunck 단위로 트랙잭션을 처리한다, Cunck 단위의 Commit과 Rollback이 이루어짐 일반적으로 청크 단위로 쪼개어 더이상 처리할 데이터가 없을때까지 반복해서 입출력하...</p></div></div></a></div><div class="card"> <a href="/posts/di-ioc%EA%B0%9C%EB%85%90/"><div class="card-body"> <span class="timeago small" > Dec 26, 2021 <i class="unloaded">2021-12-26T21:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>DI , IOC 의 개념</h3><div class="text-muted small"><p> 우선 스프링의 큰개념인 DI에대해서 알아보자 https://asfirstalways.tistory.com/334 참고 java bean 우선 java bean에대해서 알아보자 java Bean 규약에 맞춰서 만든 클래스를 뜻한다 &lt;Java Bean 규약&gt; 1. 기본생성자가 존재해야한다. 2. 모든 멤버변수의 접근제어자는 pri...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%806/"><div class="card-body"> <span class="timeago small" > Nov 23, 2021 <i class="unloaded">2021-11-23T21:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>바닐라 JS 챌린지 6</h3><div class="text-muted small"><p> preventDefault 사용 기존에 저장되어있던 자바스크립트의 이벤트들이 동작하지않게끔 막아준다. &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Vanilla Challenge&lt;/title&gt; &lt;meta charset="UTF-8" /&gt; &...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/di-ioc%EA%B0%9C%EB%85%90/" class="btn btn-outline-primary" prompt="이전"><p>DI , IOC 의 개념</p></a> <a href="/posts/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B0%B0%EC%B9%98-Chunk-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%9D%B4%ED%95%B4/" class="btn btn-outline-primary" prompt="다음"><p>스프링배치 Chunk 프로세스 이해</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">yunrap</a>. <span data-toggle="tooltip" data-placement="top" title="다르게 명시되지 않는 한, 크리에이티브 커먼즈 저작자표시-비영리 4.0 (CC BY-NC 4.0) 국제 라이선스에 따라 저자는 저작물에 대한 라이선스를 가지며, 라이선스에 따라 이용할 수 있습니다.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">인기 태그</h4><a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/%EB%B0%94%EB%8B%90%EB%9D%BCjs/">바닐라JS</a> <a class="post-tag" href="/tags/spring-project/">spring_project</a> <a class="post-tag" href="/tags/basic-project/">basic_project</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/spring/">SPRING</a> <a class="post-tag" href="/tags/jquery/">jQuery</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/diagram/">diagram</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://yunrap.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
