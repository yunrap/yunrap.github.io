<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="spring_project-1. 환경설정," /><meta property="og:locale" content="ko" /><meta name="description" content="Spring 프로젝트 환경세팅" /><meta property="og:description" content="Spring 프로젝트 환경세팅" /><link rel="canonical" href="https://yunrap.github.io/posts/Spring%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/" /><meta property="og:url" content="https://yunrap.github.io/posts/Spring%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/" /><meta property="og:site_name" content="yunrap" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-07-21T20:33:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="spring_project-1. 환경설정," /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-09-18T15:34:29+09:00","datePublished":"2021-07-21T20:33:00+09:00","description":"Spring 프로젝트 환경세팅","headline":"spring_project-1. 환경설정,","mainEntityOfPage":{"@type":"WebPage","@id":"https://yunrap.github.io/posts/Spring%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/"},"url":"https://yunrap.github.io/posts/Spring%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/"}</script><title>spring_project-1. 환경설정, | yunrap</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yunrap"><meta name="application-name" content="yunrap"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://yunrap.github.io/assets/img/favicons/스크린샷 2021-05-16 오후 12.19.55.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">yunrap</a></div><div class="site-subtitle font-italic">개발 일기</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>타임라인</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/yunrap" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dbsdpwl7','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>spring_project-1. 환경설정,</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>spring_project-1. 환경설정,</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> yunrap </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jul 21, 2021, 8:33 PM +0900" prep="on" > Jul 21, 2021 <i class="unloaded">2021-07-21T20:33:00+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Sep 18, 2021, 3:34 PM +0900" prefix="Updated " > Sep 18, 2021 <i class="unloaded">2021-09-18T15:34:29+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2179 words">12 min</span></div></div><div class="post-content"><h1 id="spring-프로젝트-환경세팅">Spring 프로젝트 환경세팅</h1><p>포트번호와 도메인주소를 직접 수정해줘야할경우 포스팅을 참고한다 https://yunrap.github.io/posts/was/</p><ol><li>자바 환경변수 설정해주기</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>그전에 자바 설정되어있어야한다
자바는 1.8버젼으로 설치해줬다
또한 환경변수도 설정해줘야한다
</pre></table></code></div></div><ol><li>maven 다운로드</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre>url https://maven.apache.org/download.cgi

c 밑에 프로젝트 폴더안에 넣어주었다.
apache-maven-3.8.1-bin.zip

C:\project\maven-3.8.1\conf 의 settings 로 들어간다

&lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;
55라인에 추가해준다

그후 repository 폴더를 만들어야한다
C:\project\maven-3.8.1\repository 폴더를 만든후

경로를 수정해준다 
&lt;localRepository&gt;C:\project\maven-3.8.1\repository&lt;/localRepository&gt;



환경변수 설정

path부분에 설정해준다
C:\project\maven-3.8.1\bin 


</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="gp">C:\Users\yunrap&gt;</span>mvn <span class="nt">-version</span>
<span class="go">Apache Maven 3.8.1 (05c21c65bdfed0f71a2f2ada8b84da59348c4c5d)
Maven home: C:\project\maven-3.8.1\bin\..
Java version: 1.8.0_291, vendor: Oracle Corporation, runtime: C:\Program Files\Java\jdk1.8.0_291\jre
Default locale: ko_KR, platform encoding: MS949
OS name: "windows 10", version: "10.0", arch: "amd64", family: "windows"
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>1. preferences 설정 
UserSettings
</pre></table></code></div></div><p>C:\project\maven-3.8.2\conf\settings.xml</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre><td class="rouge-code"><pre>
2. eclipse market 
sts설치 올선택해서 설치한다
spring tools 3 

또한 tomcat plugin을 설치해준다
원숭이모양


3. file new  spring legacy project 만든다
spring mvc project

hiboard로 만들어준다음
com.icia.web


utf-8 설정도 해준다
4. java buil path path

test 부분 삭제해준다.

그다음 /hiboard/src/main/java
/hiboard/src/main/resouces 부분
output foler 를 hiboard/src/main/webapp/WEB-INF/classes로 설정해준다


그다음
included: **/*.java  remove 삭제해준다


그다음
librarie의 jdk 1.8을 설정해준다


그다음
add libarary로 톰캣을 추가해준다


그다음
WEB-INF lib 폴더 추가해준다


그다음
src/main/resources
log4.j 삭제


그다음
src main test 폴더 삭제


프로젝트 밑에 log폴더를 만든다

archived 파일도 만든다.


그다음
pom.xml을 소스를 받아서 덮어준다.


그후 선생님이줄폴더를 받고

main부분에 java resources webapp 세폴더를 넣어준후
pom.xml에서 다시 maven build를 눌러줘서 추가해준다


그후 host파일을 연다
hiboard.icia.co.kr 를 추가해준후


C:\project\maven-3.8.1\conf\settings.xml

</pre></table></code></div></div><h1 id="간단한-용어">간단한 용어</h1><h2 id="jstl">JSTL</h2><p>JSTL은 라이브러리이기 때문에 사용전 header에 추가해야 함</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>views의 taglib.jsp 파일에 선언해줬다
</pre></table></code></div></div><h2 id="mybatis">MyBatis</h2><p>sql을 별도의 파일로 분리해서 관리하게 해준다</p><p>수동적인 파라미터 설정과 쿼리매핑 구문을 제거할수있음 SQL 문과 프로그래밍 코드의 분리</p><h2 id="maven-란">Maven 란</h2><p>자바 프로젝트의 빌드를 자동화 해주는 빌드 툴 maven은 update하지말고 install해야한다</p><h2 id="dispatcher-servlet">dispatcher servlet</h2><p>dispatcher servlet은 어노테이션을 통해서 그 값들을 매핑해준다 즉 제일 앞에서 서버로 들어오는 모든 요청을 정의하는 곳이다</p><p>전에 jsp 기본 프로젝트에서의 web xml 모든 설정을 해줘야되는거에비해서 훨씬더 편해진다</p><p>모든 url을 타고들어갈때 dispatcher servlet을 통해서 요청을 받고 요청을 준다라고 생각하면된다</p><h1 id="spring-annotation">spring annotation</h1><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>@component : 어노테이션이 있으면 스프링 빈으로 자동등록된다.
@component를 포함하는 다음 어노테이션도 자동등록된다
1. @autowired  2. @service 3.@repository

</pre></table></code></div></div><h2 id="responsebody">ResponseBody</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>@ResponseBody : HTTP body 부분만 전달 

예시  내프로젝트에선 ajaxResponse변수로 jsp파일에 리턴하였다

</pre></table></code></div></div><h2 id="autowired">Autowired</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>@Autowired : 의존성을 "타입"을 통해 찾아 주입해주는 역할을 해준다

이해가 잘안간다면 쉽게말하면 연결고리이다


@Controller("userController")
public class UserController {
   private static Logger logger = LoggerFactory.getLogger(IndexController.class);
   
   //쿠키명
   @Value("#{env['auth.cookie.name']}")
   private String AUTH_COOKIE_NAME;
   
   @Autowired
   private UserService userService;
   
</pre></table></code></div></div><p>usercontroller에서 autowired로 선언해주면 controller를 호출할때 스프링 빈에 등록되있는 userService 있는 객체를 가져다가 넣어준다</p><p>이게 바로 dependency injection이다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre>
1. User 컨트롤러에서 선언
@Autowired
   private UserService userService;
   
  
   
    User user = userService.userSelect(userId);
  
   
   이렇게 userService라고 타입을주입해주면
   
2. service로 간다
 @Service("userService") 라고설정하면 스프링에서 service 라는것을 인식한다.
 
 그후
 user = userDao.userSelect(userId);
 userSelect 메소드를 따라간다
 
 가 선언되어있는데 이때 상단에
   @Autowired
	private UserDao userDao;
 이렇게 설정하면 userDao를 가져다가 주입을해줄수있다
 
 
 
</pre></table></code></div></div><h1 id="mvc-처리순서">MVC 처리순서</h1><ol><li>클라이언트가 서버에 요청을 하면 controller인 dispatcherservlet 클래스가 요청을 받는다<li>dispatcherservlet은 프로젝트 파일내의 servlet context xml 파일의 controller인자를 통해 등록한 요청 컨트롤러를 찾아 매핑된 컨트롤러가 존재하면 requestMapping을 통해 요청을 처리할 메소드로 이동한다<li>컨트롤러는 해당 요청을 처리할 service를 받아 비즈니스로직을 서비스에게 위임한다<li>서비스는 요청에 필요한 작업을 수행한다 즉 메소드를 구현을해준다 5.dao 는 상수와 추상메소드만존재 하며 정의되있는 메소드가 xml id값으로 동일하게한다 그후 xml문으로간다<li>xml 는 sql문을 처리하는 문구가 있다</ol><h1 id="spring-bean">spring bean</h1><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>* 0개이상의 문자와 매칭
** 0개 이상의 디렉토리와 파일 매칭
</pre></table></code></div></div><h1 id="인터셉터">인터셉터</h1><p>인터셉터가 dispatcherservlet 전에 시작되므로 예시는 하나의 인터셉터로 프로젝트 내의 모든 요청에 로그인 여부를 확인할수있다</p><p>pregandle 컨트롤러가 호출되기 전에 실행되는 메서드 posthandle 컨트롤러가 호출되고 난후에 실행되는 메서드</p><p>ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ</p><ol><li>user login</ol><p>로그인 버트을 눌렀을때 /user/login으로 호출될 컨트롤러를 작성해준다</p><h1 id="usercontroller-생성">UserController 생성</h1><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre>package com.icia.web.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.icia.web.model.Response;

@Controller("userController")
public class UserController {
	private static Logger logger = LoggerFactory.getLogger(UserController.class);
	
	//쿠키명
	@Value("{env['auth.cookie.name']}")
	private String AUTH_COOKIE_NAME;
	
	@Autowired
	private UserService userService;
	
	@RequestMapping(value="/user/login", method=RequestMethod.POST)
	@ResponseBody
	public Response&lt;Object&gt; login(HttpServletRequest request, HttpServletResponse response)
	{
		
	}
	
}

</pre></table></code></div></div><p>빨간줄 뜰시 임포트해주기 login메소드만 빨간줄뜸</p><h1 id="userdaoxml-구현">UserDao.xml 구현</h1><p>window -&gt; preference-&gt; xml -&gt; xml file-&gt; template 부분에 add를 눌러서 선생님이 보내주신 문구 추가</p><p>xml 파일 형식추가</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
</pre></table></code></div></div><p>그후 com.icia.web.mapper 에 추가해준다. UserDao.xml 을 만들어준다</p><p>그러면 모양이 &lt;?xml version=”1.0” encoding=”UTF-8”?&gt; &lt;!DOCTYPE mapper PUBLIC “-//mybatis.org//DTD Mapper 3.0//EN” “http://mybatis.org/dtd/mybatis-3-mapper.dtd”&gt; 떠있는것을 확인한다</p><p>그후</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.icia.web.dao.UserDao"&gt;

&lt;resultMap type="com.icia.web.model.User" id="userResultMap"&gt;
	&lt;id column="USER_ID" property="userId"/&gt;
	&lt;result column="USER_PWD" property="userPwd"/&gt;
	&lt;result column="USER_NAME" property="userName"/&gt;
	&lt;result column="USER_EMAIL" property="userEmail"/&gt;
	&lt;result column="STATUS" property="status"/&gt;
	&lt;result column="REG_DATE" property="regDate"/&gt;
&lt;/resultMap&gt;

&lt;select id="userSelect" parameterType="string" resultMap="userResultMap"&gt;

SELECT
    USER_ID,
    NVL(USER_PWD, '') AS USER_PWD,
    NVL(USER_NAME, '') AS USER_NAME,
    NVL(USER_EMAIL, '') AS USER_EMAIL,
    NVL(STATUS, 'N') AS STATUS,
    NVL(TO_CHAR(REG_DATE, 'YYYY.MM.DD HH24:MI:SS'), '') AS REG_DATE
FROM
    TBL_USER
WHERE
    USER_ID = #{value}
    
&lt;/select&gt;
&lt;/mapper&gt;
</pre></table></code></div></div><p>이렇게 작성해준다</p><h1 id="usercontroller-login메소드-구현">UserController login메소드 구현</h1><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre><td class="rouge-code"><pre>package com.icia.web.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.icia.common.util.StringUtil;
import com.icia.web.model.Response;
import com.icia.web.model.User;
import com.icia.web.service.UserService;
import com.icia.web.util.CookieUtil;
import com.icia.web.util.HttpUtil;
import com.icia.web.util.JsonUtil;

@Controller("userController")
public class UserController {
	private static Logger logger = LoggerFactory.getLogger(UserController.class);
	
	//쿠키명
	@Value("#{env['auth.cookie.name']}")
	private String AUTH_COOKIE_NAME;
	
	@Autowired
	private UserService userService;
	
	@RequestMapping(value="/user/login", method=RequestMethod.POST)
	@ResponseBody
	public Response&lt;Object&gt; login(HttpServletRequest request, HttpServletResponse response)
	{
		String userId = HttpUtil.get(request, "userId");
		String userPwd = HttpUtil.get(request, "userPwd");
		Response&lt;Object&gt; ajaxResponse = new Response&lt;Object&gt;(); //응답으로 보낼것을 객체로 념겨준다
		
		if(!StringUtil.isEmpty(userId) &amp;&amp; !StringUtil.isEmpty(userPwd))
		{
			User user = userService.userSelect(userId);
			
			if(user != null)
			{
				if(StringUtil.equals(user.getUserPwd(), userPwd))
				{
					CookieUtil.addCookie(response, "/", -1, AUTH_COOKIE_NAME,
							CookieUtil.stringToHex(userId));
					
					ajaxResponse.setResponse(0, "success");
				}
				else
				{
					ajaxResponse.setResponse(-1, "Passwords do not match");
				}
			}
			else 
			{
				ajaxResponse.setResponse(404, "Not Found");
			}
		}
		else
		{
			ajaxResponse.setResponse(400, "Bad Request");
		}
		logger.debug("[UserController] /user/login response\n" + JsonUtil.toJsonPretty(ajaxResponse));
		return ajaxResponse;
 	}
	
}

</pre></table></code></div></div><p>이걸로 로그인 최종 컨트롤러 구현이끝났다</p><h1 id="spring-구현-순서">spring 구현 순서</h1></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/project/'>Project</a>, <a href='/categories/spring-project/'>spring_project</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/spring-project/" class="post-tag no-text-decoration" >spring_project</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=spring_project-1. 환경설정, - yunrap&url=https://yunrap.github.io/posts/Spring%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=spring_project-1. 환경설정, - yunrap&u=https://yunrap.github.io/posts/Spring%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=spring_project-1. 환경설정, - yunrap&url=https://yunrap.github.io/posts/Spring%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>최근 업데이트</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B0%B0%EC%B9%98-Chunk-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%9D%B4%ED%95%B4/">스프링배치 Chunk 프로세스 이해</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%803/">바닐라 JS 챌린지 3</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%804/">바닐라 JS 챌린지 4</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%805/">바닐라 JS 챌린지 5</a><li><a href="/posts/%EB%B0%94%EB%8B%90%EB%9D%BC-JS-%EC%B1%8C%EB%A6%B0%EC%A7%806/">바닐라 JS 챌린지 6</a></ul></div><div id="access-tags"> <span>인기 태그</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/%EB%B0%94%EB%8B%90%EB%9D%BCjs/">바닐라JS</a> <a class="post-tag" href="/tags/spring-project/">spring_project</a> <a class="post-tag" href="/tags/basic-project/">basic_project</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/spring/">SPRING</a> <a class="post-tag" href="/tags/jquery/">jQuery</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/diagram/">diagram</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">목차</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>이 블로그 다른 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/basic_project/"><div class="card-body"> <span class="timeago small" > Jul 22, 2021 <i class="unloaded">2021-07-22T20:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>spring_project-2.</h3><div class="text-muted small"><p> 회원가입 화면만들기 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65...</p></div></div></a></div><div class="card"> <a href="/posts/%ED%9A%8C%EC%9B%90%EC%A0%95%EB%B3%B4-%EC%88%98%EC%A0%95/"><div class="card-body"> <span class="timeago small" > Jul 27, 2021 <i class="unloaded">2021-07-27T03:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>spring_project-3. 스프링 프로젝트(회원정보 수정)</h3><div class="text-muted small"><p> 회원정보 수정 컨트롤러 등록 updateForm 화면 구현 서비스 등록 xml 등록 원래순서는 xml부터 우선 이렇게 진행해본다 컨트롤러 등록 우선 컨트롤러를 통해 url을 매핑해준다 1 2 3 4 5 6 7 8 9 10 11 //회원정보 수정 @RequestMapping(value="/user/updateForm"...</p></div></div></a></div><div class="card"> <a href="/posts/%EA%B2%8C%EC%8B%9C%ED%8C%90/"><div class="card-body"> <span class="timeago small" > Jul 29, 2021 <i class="unloaded">2021-07-29T21:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>spring_project-4. 스프링 프로젝트(게시판)</h3><div class="text-muted small"><p> 빨리 올라오거라 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 &lt;!-- 총 게시물 수 --&gt; &lt;select id="boardListCount" parameterType="com.icia.web.model.HiBoard" resultType="Long"&gt;...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EA%B2%8C%EC%8B%9C%ED%8C%90%EB%A6%AC%EC%8A%A4%ED%8A%B8%EA%B5%AC%ED%98%84/" class="btn btn-outline-primary" prompt="이전"><p>basic_project-5. 게시판리스트구현</p></a> <a href="/posts/basic_project/" class="btn btn-outline-primary" prompt="다음"><p>spring_project-2.</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">yunrap</a>. <span data-toggle="tooltip" data-placement="top" title="다르게 명시되지 않는 한, 크리에이티브 커먼즈 저작자표시-비영리 4.0 (CC BY-NC 4.0) 국제 라이선스에 따라 저자는 저작물에 대한 라이선스를 가지며, 라이선스에 따라 이용할 수 있습니다.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">인기 태그</h4><a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/%EB%B0%94%EB%8B%90%EB%9D%BCjs/">바닐라JS</a> <a class="post-tag" href="/tags/spring-project/">spring_project</a> <a class="post-tag" href="/tags/basic-project/">basic_project</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/spring/">SPRING</a> <a class="post-tag" href="/tags/jquery/">jQuery</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/diagram/">diagram</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://yunrap.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
