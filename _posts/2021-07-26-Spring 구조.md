---
title: spring_project-3. 스프링 프로젝트(회원정보 수정)
date: 2021-07-26 18:33:00
categories: [Project, spring_project]
tags: [spring_project]
---


# ioc 와 DI 개념 파악하기


## 리팩토링

내부 구조를 효율적으로 변경해서 코드를 재구성

```
@Controller
@RequstMapping(value = "/")
public class EmailController {
  @RequestMapping(value= "/sendEmail")
  @ResponseBody
  public String sendEmail() {
    EmailServiceClient emailServiceClient = new GmailServiceClinet();
    SendEmailRequest sendEmailRequest = generateEmailRequest();
    emailServiceClient.sendEmail(SendEmailRequest);
    return "Success";
  }
}
```

여기에 무슨문제점이있을까? 

이메일을 구성해서 전달하는 역활인데
emailServiceClient 의 특정 구현 클래스를 선택하고 생성하는 일은 또다른관심사이다.


## 관심사파악

```
public void sendEmail(@RequestParam(“to”) List<String> to, 
@RequestParam(“cc”) List<String> cc) { 
String subject = generateSubject(); // 제목 생성
String body = generateBody(); //내용 생성
Content subjectContent = new Content().withData(subject); 
Body bodyContent = new Body().withHtml(new Content().withData(body)); 
Message message = new Message().withSubject(subjectContent)
.withBody(bodyContent); 
Destination destination = new Destination(); //받는 사람 구성
if (CollectionUtils.isNotEmpty(to)) { 
destination.withToAddresses(to); 
} 
if (CollectionUtils.isNotEmpty(cc)) { 
destination.withCcAddresses(cc); 
} 
SendEmailRequest sendEmailRequest = new 
SendEmailRequest().withSource(source).withDestination(destination)
.withMessage(message);
EmailServiceClient emailServiceClient = new EmailServiceClient(); 
emailServiceClient.sendEmail(sendEmailRequest); //실제 이메일 발송
}
```

sendEmail함수에서는 순수하게 이메일 발송에만 전념하게 수정


```
public void sendEmail(SendEmailRequest sendEmailRequest) 
//구성된 이메일을 외부로부터 전달받음
EmailServiceClient emailServiceClient = new EmailServiceClient(); 
emailServiceClient.sendEmail(sendEmailRequest); //실제 이메일 발송
}
```

이런게 리팩토링이다

1. 내부 구조를 효율적으로 변경해서 코드를 재구성
2. 생산성 및 코드 품질 상승


# 객체의 제어권

```
@Controller
@RequestMapping(value = "/")
public class EmailController {
@RequestMapping(value = "/sendEmail")
@ResponseBody
  public String sendEmail() {
  EmailServiceClient emailServiceClient = new GmailServiceClient();
  SendEmailRequest sendEmailRequest = generateEmailRequest();
  emailServiceClient.sendEmail(sendEmailRequest);
  return "Success";
  }
}
```



# 회원정보 수정














