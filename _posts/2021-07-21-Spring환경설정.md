---
title: spring_project-1. 
date: 2021-07-21 11:33:00
categories: [Project, spring_project]
tags: [spring_project]
---

# Spring 프로젝트 환경세팅

1. maven 다운로드

```
url https://maven.apache.org/download.cgi

c 밑에 프로젝트 폴더안에 넣어주었다.
apache-maven-3.8.1-bin.zip

C:\project\maven-3.8.1\conf 의 settings 로 들어간다

<localRepository>/path/to/local/repo</localRepository>
55라인에 추가해준다

그후 repository 폴더를 만들어야한다
C:\project\maven-3.8.1\repository 폴더를 만든후

경로를 수정해준다 
<localRepository>C:\project\maven-3.8.1\repository</localRepository>



환경변수 설정

path부분에 설정해준다
C:\project\maven-3.8.1\bin 


```

```console
C:\Users\yunrap>mvn -version
Apache Maven 3.8.1 (05c21c65bdfed0f71a2f2ada8b84da59348c4c5d)
Maven home: C:\project\maven-3.8.1\bin\..
Java version: 1.8.0_291, vendor: Oracle Corporation, runtime: C:\Program Files\Java\jdk1.8.0_291\jre
Default locale: ko_KR, platform encoding: MS949
OS name: "windows 10", version: "10.0", arch: "amd64", family: "windows"


1. preferences 설정 
UserSettings




2. eclipse market 
sts설치 올선택해서 설치한다


3. file new  spring legacy project 만든다
spring mvc project

hiboard로 만들어준다음
com.icia.web


utf-8 설정도 해준다
4. java buil path path

test 부분 삭제해준다.

그다음 /hiboard/src/main/java
/hiboard/src/main/resouces 부분
output foler 를 hiboard/src/main/webapp/WEB-INF/classes로 설정해준다



그다음
included: **/*.java  remove 삭제해준다



그다음
librarie의 jdk 1.8을 설정해준다


그다음
add libarary로 톰캣을 추가해준다



그다음
WEB-INF lib 폴더 추가해준다


그다음
src/main/resources
log4.j 삭제


그다음
src main test 폴더 삭제


프로젝트 밑에 log폴더를 만든다

archived 파일도 만든다.


그다음
pom.xml을 소스를 받아서 덮어준다.



그후 선생님이줄폴더를 받고

main부분에 java resources webapp 세폴더를 넣어준후
pom.xml에서 다시 maven build를 눌러줘서 추가해준다


그후 host파일을 연다
hiboard.icia.co.kr 를 추가해준후



C:\project\maven-3.8.1\conf\settings.xml

```


# JSTL

JSTL은 라이브러리이기 때문에 사용전 header에 추가해야 함

```
views의 taglib.jsp 파일에이 선언해줬다
```



# MyBatis 란

sql을 별도의 파일로 분리해서 관리하게 해준다

수동적인 파라미터 설정과 쿼리매핑 구문을 제거할수있음
SQL 문과 프로그래밍 코드의 분리



# Maven 란

자바 프로젝트의 빌드를 자동화 해주는 빌드 툴

maven은 update하지말고 install해야한다








# 순서
```
root-context.xml
env.xml
servelt-context.xml
```



# web.xml설정



# dispatcher servlet 

dispatcher servlet은 어노테이션을 통해서 그값들을 매핑해준다
즉 제일 앞에서 서버로 들어오는 모든 요청을 정의하는 곳이다 

전에 jsp 기본 프로젝트에서의 web xml 모든 설정을 해줘야되는거에비해서
훨씬더 편해진다

모든 url을 타고들어갈때 dispatcher servlet을 통해서 요청을 받고 요청을 준다라고
생각하면된다

dview viewresolver 세가지를 묵은 기능이 

# 컨트롤러

# 로직 처리
Service

# 외부 I/O 처리

```
@ResponseBody : HTTP body 부분만 전달
@Service 비즈니스 로직이 들어가는 service로 등록이됨
@RequestMapping
```

# MVC 처리순서

1. 클라이언트가 서버에 요청을 하면 controller인 dispatcherservlet 클래스가 요청을 받는다
2. dispatcherservlet은 프로젝트 파일내의 servlet context xml 파일의 controller인자를 통해 등록한
    요청 컨트롤러를 찾아 매핑된 컨트롤러가 존재하면 requestMapping을 통해 요청을 처리할 메소드로 이동한다

3. 컨트롤러는 해당 요청을 처리할 service를 받아 비즈니스로직을 서비스에게 위임한다
4. 서비스는 요청에 필요한 작업


dao 는 상수와 추상메소드만존재 하며 정의되있는 메소드가 xml id값으로 동일하게한다 그후 xml문으로간다
xml 는 sql문
service 는 요청에필요한 작업을 수행한다
즉 메소드를 구현을해준다





# spring bean

```
* 0개이상의 문자와 매칭
** 0개 이상의 디렉토리와 파일 매칭
```

# 인터셉터

인터셉터가 dispatcherservlet 전에 시작되므로
예시는 하나의 인터셉터로 프로젝트 내의 모든 요청에 로그인 여부를 확인할수있다

pregandle    컨트롤러가 호출되기 전에 실행되는 메서드
posthandle   컨트롤러가 호출되고 난후에 실행되는 메서드











ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ


1. user login 

로그인 버트을 눌렀을때 /user/login으로 호출될 컨트롤러를 작성해준다


# UserController 생성
```
package com.icia.web.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.icia.web.model.Response;

@Controller("userController")
public class UserController {
	private static Logger logger = LoggerFactory.getLogger(UserController.class);
	
	//쿠키명
	@Value("{env['auth.cookie.name']}")
	private String AUTH_COOKIE_NAME;
	
	@Autowired
	private UserService userService;
	
	@RequestMapping(value="/user/login", method=RequestMethod.POST)
	@ResponseBody
	public Response<Object> login(HttpServletRequest request, HttpServletResponse response)
	{
		
	}
	
}

```

service부분은 아직 구현이 안되있어 오류가뜬다


# UserDao.xml 구현

window -> preference-> xml -> xml file-> template 부분에 add를 눌러서 
선생님이 보내주신 문구 추가


xml 파일 형식추가
```
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
```
com.icia.web.mapper 에 추가해준다. UserDao.xml 을 만들어준다


그러면 모양이
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
떠있는것을 확인한다









